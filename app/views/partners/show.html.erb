<div class="app-title">
  <div>
    <% if @partner.partner_status == "recertification_required" %>
      <div class="alert alert-danger"><i class="fa fa-warning"></i>&nbsp;Please review your application details and submit for approval.</div>
    <% end %>
    <h1><i class="fa fa-building"></i>&nbsp;&nbsp;Organization Details&nbsp;&nbsp;&nbsp;<%= partner_status_badge(@partner) %></h1>
  </div>
  <ul class="app-breadcrumb breadcrumb">
    <li class="breadcrumb-item"><a href="<%= dashboard_path %>"><i class="fa fa-home fa-lg"></i></a></li>
    <li class="breadcrumb-item"><a href="#">View <%= "#{current_partner.name}" %></a></li>
  </ul>
</div>
<div class="row">
  <div class="col-md-12">
      <div class="container-fluid">
        <div class="row">
          <div class="col-6">
            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Agency Information</h5>
              <div class="card-body">
                <dl>
                  <dt>Name</dt>
                  <dd><%= @partner.name %></dd>

                  <dt>Agency Type</dt>
                  <dd><%= @partner.agency_type %></dd>

                  <% if @partner.agency_type == "Other" %>
                    <dt>Other Agency Type</dt>
                    <dd><%= @partner.other_agency_type %></dd>
                  <% end %>

                  <dt>Status</dt>
                  <dd><%= @partner.partner_status.humanize %></dd>

                  <dt>501(c)(3) IRS Determination Letter</dt>
                  <% if @partner.proof_of_partner_status.attached? %>
                    <dd>Attached
                      file: <%= link_to @partner.proof_of_partner_status.blob['filename'], rails_blob_path(@partner.proof_of_partner_status), class: "font-weight-bold" %></dd>
                  <% else %>
                    <dd>Documentation not on file</dd>
                  <% end %>

                  <dt>Description of Agency Mission</dt>
                  <dd><%= @partner.agency_mission %></dd>

                  <address>
                    <strong>Address</strong> <br>
                    <%= @partner.address1 %> <br>
                    <% unless @partner.address2.blank? %> <br>
                      <%= @partner.address2 %> <br>
                    <% end %>
                    <%= @partner.city %> <%= @partner.state %> <br>
                    <%= @partner.zip_code %>
                  </address>
                </dl>
              </div>
            </div>

            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Media Information</h5>
              <div class="card-body">
                <dl>
                  <dt>Website</dt>
                  <dd><%= @partner.website %></dd>

                  <dt>Facebook</dt>
                  <dd><%= @partner.facebook %></dd>

                  <dt>Twitter</dt>
                  <dd><%= @partner.twitter %></dd>
                </dl>
              </div>
            </div>

            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Agency Stability</h5>
              <div class="card-body">
                <dl>
                  <dt>Year Founded</dt>
                  <dd><%= @partner.founded %></dd>

                  <dt>Form 990 Filed</dt>
                  <dd><%= humanize_boolean(@partner.form_990) %></dd>

                  <dt>Form 990</dt>
                  <% if @partner.proof_of_form_990.attached? %>
                    <dd>Attached
                      file: <%= link_to @partner.proof_of_form_990.blob['filename'], rails_blob_path(@partner.proof_of_form_990), class: "font-weight-bold" %></dd>
                  <% else %>
                    <dd>Form 990 not on file</dd>
                  <% end %>

                  <dt>Program Name</dt>
                  <dd><%= @partner.program_name %></dd>

                  <dt>Program Description</dt>
                  <dd><%= @partner.program_description %></dd>

                  <dt>Agency Age</dt>
                  <dd><%= @partner.program_age %></dd>

                  <dt>Case Management</dt>
                  <dd><%= humanize_boolean(@partner.case_management) %></dd>

                  <dt>Evidence Based</dt>
                  <dd><%= humanize_boolean(@partner.evidence_based) %></dd>

                  <dt>Evidence Base Description</dt>
                  <dd><%= @partner.evidence_based_description %></dd>

                  <dt>Verified Successes of Program</dt>
                  <dd><%= @partner.program_client_improvement %></dd>

                  <dt>Diaper Use</dt>
                  <dd><%= @partner.diaper_use %></dd>

                  <dt>Do You Receive Diapers From Other Sources</dt>
                  <dd><%= @partner.other_diaper_use %></dd>

                  <dt>Current Providing Diapers</dt>
                  <dd><%= humanize_boolean(@partner.currently_provide_diapers) %></dd>

                  <dt>Turn Away Child Care</dt>
                  <dd><%= humanize_boolean(@partner.turn_away_child_care) %></dd>

                  <address>
                    <strong>Program Address</strong> <br>
                    <%= @partner.program_address1 %> <br>
                    <% unless @partner.program_address2.blank? %>
                      <%= @partner.program_address2 %> <br>
                    <% end %>
                    <%= @partner.program_city %> <%= @partner.program_state %> <br>
                    <%= @partner.program_zip_code %>
                  </address>
                </dl>
              </div>
            </div>
            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Organizational Capacity</h5>
              <div class="card-body">
                <dl>
                  <dt>Max Serve</dt>
                  <dd><%= @partner.max_serve %></dd>

                  <dt>Incorporate Plan</dt>
                  <dd><%= @partner.incorporate_plan %></dd>

                  <dt>Responsible Staff Position</dt>
                  <dd><%= humanize_boolean(@partner.responsible_staff_position) %></dd>

                  <dt>Storage Space</dt>
                  <dd><%= humanize_boolean(@partner.storage_space) %></dd>

                  <dt>Storage Space Description</dt>
                  <dd><%= @partner.describe_storage_space %></dd>
                </dl>
              </div>
            </div>
            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Sources of Funding</h5>
              <div class="card-body">
                <dl>
                  <dt>Sources of Funding</dt>
                  <dd><%= @partner.sources_of_funding %></dd>

                  <dt>How do you currently obtain diapers?</dt>
                  <dd><%= @partner.sources_of_diapers %></dd>

                  <dt>Diaper Budget</dt>
                  <dd><%= @partner.diaper_budget %></dd>

                  <dt>Diaper Funding Source</dt>
                  <dd><%= @partner.diaper_funding_source %></dd>
                </dl>
              </div>
            </div>
          </div>


          <div class="col-6">
            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Population Served</h5>
              <div class="card-body">
                <dl>
                  <dt>Clients Have An Income Requirement to Work With You</dt>
                  <dd><%= humanize_boolean(@partner.income_requirement_desc) %></dd>

                  <dt>Serve Income Circumstances</dt>
                  <dd><%= humanize_boolean(@partner.serve_income_circumstances) %></dd>

                  <dt>Do You Verify The Income Of Your Clients</dt>
                  <dd><%= humanize_boolean(@partner.income_verification) %></dd>

                  <dt>Internal DB</dt>
                  <dd><%= humanize_boolean(@partner.internal_db) %></dd>

                  <dt>MAAC Program Participant</dt>                  <dd><%= humanize_boolean(@partner.maac) %></dd>

                  <h6>Ethnic Composition of Those Served</h6>
                  <dt>African American</dt>
                  <dd><%= @partner.population_black || t(:not_provided) %></dd>

                  <dt>Caucasian</dt>
                  <dd><%= @partner.population_white || t(:not_provided) %></dd>

                  <dt>Hispanic</dt>
                  <dd><%= @partner.population_hispanic || t(:not_provided) %></dd>

                  <dt>Asian</dt>
                  <dd><%= @partner.population_asian || t(:not_provided) %></dd>

                  <dt>American Indian</dt>
                  <dd><%= @partner.population_american_indian || t(:not_provided) %></dd>

                  <dt>Pacific Islander</dt>
                  <dd><%= @partner.population_island || t(:not_provided) %></dd>

                  <dt>Multi-racial</dt>
                  <dd><%= @partner.population_multi_racial || t(:not_provided) %></dd>

                  <dt>Other</dt>
                  <dd><%= @partner.population_other || t(:not_provided) %></dd>

                  <dt>Zip Codes Served</dt>
                  <dd><%= @partner.zips_served %></dd>

                  <h6>Poverty Information of Those Served</h6>
                  <dt>At FPL or below</dt>
                  <dd><%= @partner.at_fpl_or_below || t(:not_provided) %></dd>

                  <dt>Above 1-2 times FPL</dt>
                  <dd><%= @partner.above_1_2_times_fpl || t(:not_provided) %></dd>

                  <dt>Greater than 2 times FPL</dt>
                  <dd><%= @partner.greater_2_times_fpl || t(:not_provided) %></dd>

                  <dt>Poverty Unknown</dt>
                  <dd><%= @partner.poverty_unknown || t(:not_provided) %></dd>

                  <h6>Ages Served</h6>
                  <dt>Ages</dt>
                  <dd><%= @partner.ages_served || t(:not_provided) %></dd>
                </dl>
              </div>
            </div>

            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Executive Director</h5>
              <div class="card-body">
                <dl>
                  <dt>Name</dt>
                  <dd><%= @partner.executive_director_name %></dd>

                  <dt>Phone Number</dt>
                  <dd><%= @partner.executive_director_phone %></dd>

                  <dt>Email</dt>
                  <dd><%= @partner.executive_director_email %></dd>
                </dl>

                <h6>Program Contact Person</h6>
                <dl>
                  <dt>Name</dt>
                  <dd><%= @partner.program_contact_name %></dd>

                  <dt>Phone Number</dt>
                  <dd><%= @partner.program_contact_phone %></dd>

                  <dt>Mobile Phone Number</dt>
                  <dd><%= @partner.program_contact_mobile %></dd>

                  <dt>Email</dt>
                  <dd><%= @partner.program_contact_email %></dd>
                </dl>
              </div>
            </div>

            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Diaper Pick Up Person</h5>
              <div class="card-body">
                <dl>
                  <dt>Pick Up Method</dt>
                  <dd><%= @partner.pick_up_method %></dd>

                  <dt>Name</dt>
                  <dd><%= @partner.pick_up_name %></dd>

                  <dt>Phone</dt>
                  <dd><%= @partner.pick_up_phone %></dd>

                  <dt>Email</dt>
                  <dd><%= @partner.pick_up_email %></dd>
                </dl>
              </div>
            </div>

            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Agency Distribution Information</h5>
              <div class="card-body">
                <dl>
                  <dt>Distribution Times</dt>
                  <dd><%= @partner.distribution_times %></dd>

                  <dt>New Client Times</dt>
                  <dd><%= @partner.new_client_times %></dd>

                  <dt>More Docs Required</dt>
                  <dd><%= @partner.more_docs_required %></dd>
                </dl>
              </div>
            </div>

            <div class="card mb-4">
              <h5 class="card-header bg-primary text-white">Attached Documents</h5>
              <div class="card-body">
                <% if @partner.documents.attached? %>
                  <dt>Attached files:</dt>
                  <% @partner.documents.each do |doc| %>
                    <dd><%= link_to doc.blob['filename'], rails_blob_path(doc), class: "font-weight-bold" %></dd>
                  <% end %>
                <% else %>
                  <dd>No files saved</dd>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
<div class="col-10 offset-1">
  <div class="tile">
    <div class="tile-body">
      <div class="row">
        <div class="form-group col-6">
          <div class="actions">
            <% if @partner.verified? %>
              <%= link_to "Request Diapers", partner_requests_path, class: 'btn btn-success' %>
            <% end %>
            <% unless @partner.verified? %>
              <%= link_to partner_approve_path(@partner), class: "btn btn-primary #{'disabled' unless @partner.pending? || @partner.partner_status == "recertification_required"}" do %>
                <i class="fa fa-paper-plane"></i> Submit for Approval
              <% end %>
            <% end %>
            <%= link_to edit_partner_path(@partner), class: 'btn btn-primary' do %>
              <i class="fa fa-pencil"></i> Update Information
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
